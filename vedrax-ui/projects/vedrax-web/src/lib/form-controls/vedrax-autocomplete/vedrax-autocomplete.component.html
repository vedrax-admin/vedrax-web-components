<div *ngIf="descriptor">
    <div *ngIf="search; else selectedItem">

        <metrolab-vedrax-search-list [label]="descriptor.controlLabel" [endpoint]="endpoint" [params]="params" [filters]="filters" (onClosed)="closeSearch()" (onSelect)="select($event)"></metrolab-vedrax-search-list>

    </div>
    <ng-template #selectedItem>
        <mat-form-field>
            <button *ngIf="selected.key" mat-button matPrefix mat-icon-button aria-label="clear" (click)="clearSearch()">
                <mat-icon>clear</mat-icon>
            </button>
            <mat-label>{{descriptor.controlLabel}}</mat-label>
            <input readonly matInput type="text" [ngModel]="selected.value">
            <button mat-button matSuffix mat-icon-button aria-label="Edit" (click)="openSearch()">
                <mat-icon>edit</mat-icon>
            </button>
            <mat-error>
                <vedrax-validation [control]="formControl" [validations]="descriptor.controlValidations"></vedrax-validation>
            </mat-error>
        </mat-form-field>
    </ng-template>
</div>