<div *ngIf="descriptor" [formGroup]="form">

    <div [formArrayName]="descriptor.controlName" class="vedrax-matrix-pb-15">

        <div fxFlex="50" fxFlex.xs="100" *ngFor="let control of formArray.controls; let i = index;" [formGroupName]="i">

            <mat-expansion-panel *ngIf="control.get('visible').value">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{control.get('key').value}}
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <p *ngFor="let entry of control.get('entries').controls; let y = index;" [formGroupName]="y">
                    <mat-form-field appearance="outline">
                        <mat-label>{{entry.get('key').value}}</mat-label>
                        <input type="number" required matInput formControlName="value">
                    </mat-form-field>
                </p>

            </mat-expansion-panel>

        </div>

    </div>

</div>