<div *ngIf="descriptor" [formGroup]="form">

    <div [formArrayName]="descriptor.controlName" class="vedrax-matrix-pb-15">

        <mat-accordion>

            <ng-container *ngFor="let control of formArray.controls; let i = index;">

                <mat-expansion-panel *ngIf="control.get('visible').value">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            {{control.get('key').value}}
                        </mat-panel-title>
                    </mat-expansion-panel-header>


                    <p *ngFor="let entry of control.get('entries').controls; let y = index;">
                        <mat-form-field appearance="outline">
                            <mat-label>{{entry.get('key').value}}</mat-label>
                            <input type="number" required matInput [formControl]="entry.get('value')">
                        </mat-form-field>
                    </p>

                </mat-expansion-panel>

            </ng-container>

        </mat-accordion>

    </div>

</div>