<div *ngIf="descriptor" class="vedrax-dynamic-m-b-15" [formGroup]="form">

    <div fxLayout="column" [formArrayName]="descriptor.controlName">

        <mat-accordion class="vedrax-card-dynamic">

            <mat-expansion-panel *ngFor="let control of formArray.controls; let i = index;" [formGroupName]="i">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <vedrax-title [descriptor]="descriptor" [index]="i"></vedrax-title>
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <vedrax-control *ngFor="let ctrl of descriptor.controlChildren" [descriptor]="ctrl"
                    [control]="control.get(ctrl.controlName)"></vedrax-control>

                <mat-action-row>

                    <button class="remove-param" mat-icon-button aria-label="remove" (click)="remove(i)">
                        <mat-icon>delete</mat-icon>
                    </button>

                </mat-action-row>
            </mat-expansion-panel>
        </mat-accordion>

        <button color="primary" class="add-param" mat-stroked-button aria-label="add" (click)="add()">
            {{descriptor.controlLabel}}
        </button>

    </div>

</div>